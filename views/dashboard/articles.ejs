<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Articles</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="/stylesheets/sidebar.css">
    <link rel="stylesheet" href="/stylesheets/articles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.min.css">
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js" integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ" crossorigin="anonymous"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js" integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY" crossorigin="anonymous"></script>
</head>

<body>
    <div class="wrapper">
        <%- include('../partials/sidebar') %>
            <div id="content">
                <%- include('../partials/navbar') %>
                    <div class="row">
                        <% for ( let i = 0; i < articles.length; i++ ) { %>
                            <div class="col-12 col-lg-6 mb-5">
                                <div class="card myCard">
                                    <div class="background-block">
                                        <% if (articles[i].text.match(/<img\s+(?:[^>]*?\s+)?src=([" '])(.*?)\1/)) { %>
                                            <img src="<%= articles[i].text.match(/<img\s+(?:[^>]*?\s+)?src=([" '])(.*?)\1/)[2] %> " class="background" />
                                    <% } else {%>
                                        <img src="/images/avatars/article.png" class="background" />
                                        <% } %>
                            </div>
                            <div class="profile-thumb-block">
                                <img src="/images/avatars/<%= articles[i].owner.avatar %>" class="profile" />
                            </div>
                            <div class="card-content">
                                <h2><%= articles[i].title %><small><%= articles[i].owner.firstName + " " + articles[i].owner.lastName %></small></h2>
                                <p><%= articles[i].createdAt.toLocaleString("fa-IR", {dateStyle : "short"}) %> </p>
                                <a class="btn btn-primary second-btn" href="/article/<%= articles[i]._id %>">مشاهده</a>
                            </div>
                        </div>
                    </div>
                        <% } %>
            </div>
                <nav aria-label="Page navigation example" id="pagInation">
                    <ul class="pagination mt-5">
    
                    </ul>
                </nav>
            </div>
    </div>
    <div class="toast">
        <div class="toast-header">
            <strong class="mr-auto text-primary">خطا</strong>
            <button type="button" class="ml-2 mb-1 close" data-dismiss="toast">&times;</button>
        </div>
        <div class="toast-body">
        </div>
    </div>
    <script>
        var articlesLength = <%= number %>
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.concat.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="/javascripts/dashboard.js"></script>
    <script src="/javascripts/articles.js"></script>
</body>

</html>